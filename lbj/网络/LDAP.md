# [LDAP](https://www.ietf.org/rfc/rfc2251.txt)(Lightweight Directory Access Protocal v3)

注意：1.该版本的协议缺少强制的标准认证机制。2.该协议基于TCP或其他传输方式传输，节省X.500 DAP的大部分会话/表示开销。3.大多数协议的数据元素都可以通过一般字符串编码。

## 特点

1. LDAP 是一种网络协议而不是数据库，而且LDAP的目录不是关系型的，没有RDBMS那么复杂，
2. LDAP不支持数据库的Transaction机制，纯粹的无状态、请求-响应的工作模式。
3. LDAP不能存储BLOB，LDAP的读写操作是非对称的，读非常方便，写比较麻烦，
4. LDAP支持复杂的查询过滤器(filter)，可以完成很多类似数据库的查询功能。
5. LDAP使用树状结构，接近于公司组织结构、文件目录结构、域名结构等我们耳熟能详的东西。 LDAP使用简单、接口标准，并支持SSL访问。

## 应用场景

网络服务：DNS服务

统一认证服务：1.Linux PAM (ssh, login, cvs. . . )。2.Apache访问控制。3.各种服务登录(ftpd, php based, perl based, python based. . . )。4.个人信息类，如地址簿。5.服务器信息，如帐号管理、邮件服务等。

## 模型

### 协议模型

一般的协议模型采用某一个客户端对服务端直接执行协议操作，但在本模型客户端通过发送协议请求描述操作，然后服务端进行执行。当完成相应操作后，服务端返回一个包含结果和error的的响应给请求的客户端。服务端和客户端可以任意交换请求和应答执行的顺序，只要满足客户端每一个请求最终都收到了相应的相应，也并必须的没有同步要求。在之前的LDAP的版本没有服务端返回客户端的条例，但为了提高性能和分布这个版本的协议运行服务器返回客户端的引用给其他服务器。（这将允许当前服务器卸下当前任务，通过联系其他服务器去推进操作。？）

### 数据模型

LDAP协议假设这存在一个或多个服务器联合提供Directory Information Tre(DIT)的访问服务。该树由entry组成，每个entry拥有一个名字---拥有一个或多个属性值构成了相对区分的名字(RDN)，其在它的兄弟中必须是唯一的。树根下的特定直接下级目录与各个相对区分名字串联组合成树内唯一的区分名字(DN)，如:CN=Steve Kille, O=Isode Limited, C=GB。一些服务器可能会保持缓存或副本，用于回答查询和对比请求，但在变更操作时需要联系其他服务器或返回其引用。执行缓存的服务器必须确保他们不违反原始服务器对该数据施加的访问限制控制。每一个entry集合，从由特定服务器控制的开始entry及其下属以及下属的下属，直到由其他服务器控制的entries被称之为naming context。DIT的根结点称之为DSE，不属于任何naming context，每个服务器在root DSE中都拥有不同的属性值(?)。
