# 安全

## 拒绝服务攻击

Dos(拒绝服务攻击)，一般是采用一对一的方式，通过制造发送大量无用数据使目标主机网络拥塞，耗尽服务资源。DDoS则是通过分布式的方式，通过大量傀儡即发动攻击。普通DDoS一般针对IP进行攻击，CC主要针对网页。

### DDoS攻击现象

1. 被攻击主机上有大量等待的TCP连接
2. 无用的数据请求
3. 源地址为假

### CC式DDoS攻击

CC攻击通过模拟多个用户不停访问那些需要大量数据操作的入口，导致服务器资源枯竭。同时，由于CC攻击的IP都是真实、分散，并且正常的数据包，所以服务器可以连接,ping也没有问题，但相关资源就是无法获取。

攻击现象：查看日志，发现不同的IP都反复访问同一个文件

## TLS

### [wireshark解密](https://wiki.wireshark.org/TLS#using-the-pre-master-secret)

1.chrome,firefox,curl,做好配置可以解密:
1.1在https交流的过程中，涉及到三次随机因子的交互问题.特别是第三次，客户端使用服务端的公钥加密,这个数无法获取
1.2浏览器可以获取,是因为这个随机因子就是浏览器产生的.所以浏览器直接就可以生成对称加密的密钥，然后存起来，我们就可以用这个解密https了
1.3而如果是app生成，他不存，从外部无法获取,wireshark抓到包也无法解密
2.拥有rsa私钥可以解密
2.1拥有rsa私钥，就可以解密第三个随机因子，因为是使用公钥加密到。
2.2在wireshark官网说，TLS1.3协议好像就不能直接这样做了，可能又额外在服务端增加了验证机制,TLS1.3以下版本可以
3.直接用私钥太危险，一般就使用第一种方法。app想支持，得app端有保存第三个随机因子或者直接保存对称加密密钥的机制，不然外部无法破解

### ipsec

由于IP报文本身没有集成任何安全特性，IP数据包在公用网络如Internet中传输可能会面临被伪造、窃取或篡改的风险。通信双方通过IPsec建立一条IPsec隧道，IP数据包通过IPsec隧道进行加密传输，有效保证了数据在不安全的网络环境如Internet中传输的安全性。

IPSec可以实现以下4项功能:1.数据机密性：IPSec发送方将包加密后再通过网络发送。2.数据完整性：IPSec可以验证IPSec发送方发送的包，以确保数据传输时没有被改变。3.数据认证：IPSec接受方能够鉴别IPsec包的发送起源。此服务依赖数据的完整性。4.反重放:IPSec接受方能检查并拒绝重放包。
IPSec主要由以下协议组成：
一、认证头（AH），为IP数据报提供无连接数据完整性、消息认证以及防重放攻击保护；
二、封装安全载荷（ESP），提供机密性、数据源认证、无连接完整性、防重放和有限的传输流（traffic-flow）机密性；
三、安全关联（SA），提供算法和数据包，提供AH、ESP操作所需的参数。
四、密钥协议（IKE），提供对称密码的钥匙的生存和交换

IPsec VPN是指采用IPsec实现远程接入的一种VPN技术，通过在公网上为两个或多个私有网络之间建立IPsec隧道，并通过加密和验证算法保证VPN连接的安全。

### ipsec与SSL的区别

ssl只能作用于tcp协议之上，而ipsec作用于ip协议之上，支持udp。

握手阶段上的区别:

IPSec握手协议有两个：IKEv1, IKEv2。IKEv2在协商流程上大大简化，可以更加快速高效的建立连接。
IKEv1介绍：流程分为两个阶段，第一阶段有两个模式：主模式和野蛮模式，第二阶段只有一个模式：快速模式。其中IPSec分为两个阶段的一个好处就是, 第二阶段可以针对不同的connection选择不同的加密方式 非高密信息可以使用弱一点的加密算法。

## 协议

### VPN

VPN（Virtual Private Network，虚拟专用网）是一种在公用网络上建立专用网络的技术。它之所以称之为虚拟网，主要是因为VPN的两个节点之间并没有像传统专用网那样使用端到端的物理链路，而是架构在公用网络如Internet之上的逻辑网络，用户数据通过逻辑链路传输。

按照VPN协议分，常见的VPN种类有：IPsec、SSL、GRE、PPTP和L2TP等。其中IPsec是通用性较强的一种VPN技术，适用于多种网络互访的场景。

## 防火墙

### netfilter

Netfilter是linux内核模块，提供数据包过滤、网络地址翻译和端口翻译的各种选项
在用户态层面，根据不同的协议类型，为上层用户提供了不同的系统调用工具，比如我们常用的针对IPv4协议iptables，IPv6 协议的ip6tables，针对ARP协议的arptables，针对网桥控制的ebtables，针对网络连接追踪的conntrack等。

### iptables

### firewall

## 工具

### [sslkeylog format of firefox](https://firefox-source-docs.mozilla.org/security/nss/legacy/key_log_format/index.html)

### [Charles代理解析](https://www.charlesproxy.com/latest-release/download.do)

[可以通过配置代理服务器，转传我们的https请求，从而解析https](https://zhuanlan.zhihu.com/p/399445161)